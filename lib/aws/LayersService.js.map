{"version":3,"sources":["../../src/aws/LayersService.js"],"names":["AbstractService","require","LayersService","params","Content","S3Bucket","bucketName","S3Key","zipFileKeyName","LayerName","stackName","Description","CompatibleRuntimes","provider","request","then","result","plugin","log","cacheObject","LayerVersionArn","catch","e","console","message","process","exit","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAMA,eAAe,GAAGC,OAAO,CAAC,oBAAD,CAA/B;;IAEMC,a;;;;;;;;;;;;;;;;;;;;;;;AAEIC,gBAAAA,M,GAAS;AACbC,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,QAAQ,EAAE,KAAKC,UADR;AAEPC,oBAAAA,KAAK,EAAE,KAAKC;AAFL,mBADI;AAKbC,kBAAAA,SAAS,EAAE,KAAKC,SALH;AAMbC,kBAAAA,WAAW,EAAE,8BANA;AAObC,kBAAAA,kBAAkB,EAAE,CAAC,QAAD;AAPP,iB;iDAUR,KAAKC,QAAL,CAAcC,OAAd,CAAsB,QAAtB,EAAgC,qBAAhC,EAAuDX,MAAvD,EACJY,IADI,CACC,UAACC,MAAD,EAAY;AAChB,kBAAA,KAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgB,gCAAhB;;AACA,kBAAA,KAAI,CAACD,MAAL,CAAYE,WAAZ,CAAwBC,eAAxB,GAA0CJ,MAAM,CAACI,eAAjD;AACA,yBAAOJ,MAAP;AACD,iBALI,EAMJK,KANI,CAME,UAAAC,CAAC,EAAI;AACVC,kBAAAA,OAAO,CAACL,GAAR,CAAYI,CAAC,CAACE,OAAd;AACAC,kBAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD,iBATI,C;;;;;;;;;;;;;;;;;;EAZiB1B,e;;AAyB5B2B,MAAM,CAACC,OAAP,GAAiB1B,aAAjB","sourcesContent":["const AbstractService = require('../AbstractService');\n\nclass LayersService extends AbstractService {\n  async publishVersion() {\n    const params = {\n      Content: {\n        S3Bucket: this.bucketName,\n        S3Key: this.zipFileKeyName\n      },\n      LayerName: this.stackName,\n      Description: 'created by serverless-layers',\n      CompatibleRuntimes: ['nodejs']\n    };\n\n    return this.provider.request('Lambda', 'publishLayerVersion', params)\n      .then((result) => {\n        this.plugin.log('New layer version published...');\n        this.plugin.cacheObject.LayerVersionArn = result.LayerVersionArn;\n        return result;\n      })\n      .catch(e => {\n        console.log(e.message);\n        process.exit(1);\n      });\n  }\n}\n\nmodule.exports = LayersService;\n"],"file":"LayersService.js"}