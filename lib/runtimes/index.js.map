{"version":3,"sources":["../../src/runtimes/index.js"],"names":["nodejs","require","python","Runtimes","plugin","runtime","service","provider","patterns","env","test","_runtime","install","inboundSettings","packagePath","console","warn","dependenciesPath","commands","hasDependencesChanged","module","exports"],"mappings":";;;;;;;;;;;;;;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAMC,MAAM,GAAGD,OAAO,CAAC,UAAD,CAAtB;;IAEME,Q;;;AACJ,oBAAYC,MAAZ,EAAoB;AAAA;AAClB,SAAKA,MAAL,GAAcA,MAAd;AADkB,QAGVC,OAHU,GAGE,KAAKD,MAAL,CAAYE,OAAZ,CAAoBC,QAHtB,CAGVF,OAHU;AAKlB,QAAMG,QAAQ,GAAG;AACfN,MAAAA,MAAM,EAAE,CAAC,QAAD,EAAWA,MAAX,CADO;AAEfF,MAAAA,MAAM,EAAE,CAAC,MAAD,EAASA,MAAT;AAFO,KAAjB;;AAKA,SAAK,IAAMS,GAAX,IAAkBD,QAAlB,EAA4B;AAC1B,UAAIA,QAAQ,CAACC,GAAD,CAAR,CAAc,CAAd,EAAiBC,IAAjB,CAAsBL,OAAtB,CAAJ,EAAoC;AAClC,aAAKM,QAAL,GAAgB,IAAIH,QAAQ,CAACC,GAAD,CAAR,CAAc,CAAd,CAAJ,CAAqB,KAAKL,MAA1B,EAAkCC,OAAlC,EAA2CI,GAA3C,CAAhB;AACA;AACD;AACF;AACF;;;;8BAES;AACR,aAAO,KAAKE,QAAL,CAAcC,OAAd,EAAP;AACD;;;yCAEwC;AAAA,UAAtBC,eAAsB,uEAAJ,EAAI;;AACvC,UAAIA,eAAe,CAACC,WAApB,EAAiC;AAC/BC,QAAAA,OAAO,CAACC,IAAR,CAAa,uFAAb;AACAH,QAAAA,eAAe,CAACI,gBAAhB,GAAmCJ,eAAe,CAACC,WAAnD;AACD;;AACD,+BAAY,KAAKH,QAAL,WAAZ,MAAsCE,eAAtC;AACD;;;kCAEa;AACZ,aAAO,KAAKF,QAAL,CAAcO,QAArB;AACD;;;4CAEuB;AACtB,aAAO,KAAKP,QAAL,CAAcQ,qBAAd,EAAP;AACD;;;;;AAGHC,MAAM,CAACC,OAAP,GAAiBlB,QAAjB","sourcesContent":["const nodejs = require('./nodejs');\nconst python = require('./python');\n\nclass Runtimes {\n  constructor(plugin) {\n    this.plugin = plugin;\n\n    const { runtime } = this.plugin.service.provider;\n\n    const patterns = {\n      python: [/python/, python],\n      nodejs: [/node/, nodejs],\n    };\n\n    for (const env in patterns) {\n      if (patterns[env][0].test(runtime)) {\n        this._runtime = new patterns[env][1](this.plugin, runtime, env);\n        break;\n      }\n    }\n  }\n\n  install() {\n    return this._runtime.install();\n  }\n\n  getDefaultSettings(inboundSettings = {}) {\n    if (inboundSettings.packagePath) {\n      console.warn('WARN You should use \"dependenciesPath\" instead of the deprecated \"packagePath\" param.');\n      inboundSettings.dependenciesPath = inboundSettings.packagePath;\n    }\n    return { ...this._runtime.default, ...inboundSettings };\n  }\n\n  getCommands() {\n    return this._runtime.commands;\n  }\n\n  hasDependencesChanged() {\n    return this._runtime.hasDependencesChanged();\n  }\n}\n\nmodule.exports = Runtimes;\n"],"file":"index.js"}